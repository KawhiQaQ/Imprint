# Imprint è¿¹å½• - AI æ—…è¡Œæ—¥è®°ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½æ—…è¡Œè§„åˆ’å’Œæ—¥è®°ç”Ÿæˆç³»ç»Ÿã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°æ—…è¡Œæ„¿æ™¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ¨èç›®çš„åœ°ã€ç”Ÿæˆè¡Œç¨‹è§„åˆ’ï¼Œå¹¶åœ¨æ—…è¡Œè¿‡ç¨‹ä¸­å¸®åŠ©è®°å½•å’Œç”Ÿæˆç²¾ç¾çš„æ—…è¡Œå›å¿†å½•ã€‚

## ğŸ“¸ ç•Œé¢å±•ç¤º

<p align="center">
  <img src="figures/1.png" width="45%" />
  <img src="figures/2.png" width="45%" />
</p>
<p align="center">
  <img src="figures/3.png" width="45%" />
  <img src="figures/3.png" width="45%" />
</p>
<p align="center">
  <img src="figures/5.png" width="45%" />
  <img src="figures/5-2.png" width="45%" />
</p>
<p align="center">
  <img src="figures/6.png" width="45%" />
  <img src="figures/7.png" width="45%" />
</p>

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¯ **æ„¿æ™¯åˆ†æ** - é€šè¿‡è‡ªç„¶è¯­è¨€ç†è§£ç”¨æˆ·çš„æ—…è¡ŒæœŸæœ›
- ğŸŒ **æ™ºèƒ½æ¨è** - AI é©±åŠ¨çš„ç›®çš„åœ°æ¨èï¼Œé…æœ‰ç²¾ç¾å°é¢å›¾
- ğŸ“… **è¡Œç¨‹è§„åˆ’** - å¯¹è¯å¼è¡Œç¨‹ç”Ÿæˆä¸è°ƒæ•´ï¼Œæ”¯æŒæ‹–æ‹½æ’åº
- ğŸ“¸ **æ—¥è®°è®°å½•** - æ”¯æŒç…§ç‰‡ä¸Šä¼ ã€è¯­éŸ³å½•åˆ¶ã€æ–‡å­—è®°å½•
- ğŸ¤– **AI æ—¥è®°ç”Ÿæˆ** - åŸºäºç”¨æˆ·ç´ æè‡ªåŠ¨ç”Ÿæˆæ–‡å­¦åŒ–æ—¥è®°
- ğŸ¨ **AI é…å›¾** - æ— ç…§ç‰‡æ—¶è‡ªåŠ¨ç”Ÿæˆæ°´å½©é£æ ¼é…å›¾
- ğŸ“– **å›å¿†å½•ç”Ÿæˆ** - è‡ªåŠ¨ç”Ÿæˆç²¾ç¾çš„æ—…è¡Œå›å¿†å½•ï¼Œå«æ—…è¡Œäººæ ¼åˆ†æ
- ğŸ“š **è¿¹å½•ä¹¦æ¶** - æ‰‹è´¦å¼ä¹¦ç±é£æ ¼çš„æ—…è¡Œè®°å½•ç®¡ç†

## ğŸ›  æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js + Express + TypeScript + SQLite (better-sqlite3)
- **å‰ç«¯**: React 18 + TypeScript + Vite + React Router
- **AI æœåŠ¡**: 
  - DeepSeek (æ–‡æœ¬ç”Ÿæˆ)
  - é€šä¹‰åƒé—® Qwen-VL (å›¾åƒç†è§£)
  - é€šä¹‰ä¸‡ç›¸ Wanx (å›¾åƒç”Ÿæˆ)
- **å¤–éƒ¨ API**: 
  - Unsplash (ç›®çš„åœ°å°é¢å›¾)
  - é«˜å¾·åœ°å›¾ (POI æœç´¢)
  - Tavily (ä¿¡æ¯éªŒè¯)
- **å­˜å‚¨**: é˜¿é‡Œäº‘ OSS (å¯é€‰ï¼Œç”¨äºå›¾ç‰‡äº‘å­˜å‚¨)

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 8.0.0

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd ai-travel-planner
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶åç«¯ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š

```bash
# Windows
copy backend\.env.example backend\.env

# macOS/Linux
cp backend/.env.example backend/.env
```

ç¼–è¾‘ `backend/.env` æ–‡ä»¶ï¼Œé…ç½® API å¯†é’¥ï¼ˆè¯¦è§ä¸‹æ–¹ API é…ç½®æŒ‡å—ï¼‰ã€‚

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

**æ–¹å¼ä¸€ï¼šåŒæ—¶å¯åŠ¨å‰åç«¯**

```bash
npm run dev
```

**æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨**

```bash
# ç»ˆç«¯ 1 - å¯åŠ¨åç«¯ (ç«¯å£ 3000)
npm run dev:backend

# ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯ (ç«¯å£ 5173)
npm run dev:frontend
```

### 5. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`

---

## ğŸ”‘ API é…ç½®æŒ‡å—

åœ¨ `backend/.env` ä¸­é…ç½®ä»¥ä¸‹ API å¯†é’¥ï¼š

### å¿…éœ€é…ç½®

#### DeepSeek API â­ å¿…éœ€

ç”¨äºï¼šæ„¿æ™¯åˆ†æã€ç›®çš„åœ°æ¨èã€è¡Œç¨‹è§„åˆ’ã€æ—¥è®°ç”Ÿæˆã€å›å¿†å½•ç”Ÿæˆ

```env
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat
```

**è·å–æ–¹å¼ï¼š**
1. è®¿é—® [DeepSeek å¼€æ”¾å¹³å°](https://platform.deepseek.com/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. åœ¨æ§åˆ¶å°åˆ›å»º API Key

---

### å¯é€‰é…ç½®

#### é€šä¹‰åƒé—® Qwen-VL API

ç”¨äºï¼šç…§ç‰‡å†…å®¹åˆ†æï¼ˆæ— é…ç½®æ—¶ä½¿ç”¨æ–‡ä»¶åä½œä¸ºæè¿°ï¼‰

```env
QWEN_VL_API_KEY=your_qwen_vl_api_key_here
QWEN_VL_BASE_URL=https://dashscope.aliyuncs.com/api/v1
```

#### é€šä¹‰ä¸‡ç›¸ Wanx API

ç”¨äºï¼šç”Ÿæˆå›å¿†å½•å°é¢å›¾ã€æ— ç…§ç‰‡æ—¶ç”Ÿæˆ AI é…å›¾

```env
WANX_API_KEY=your_wanx_api_key_here
WANX_BASE_URL=https://dashscope.aliyuncs.com/api/v1
WANX_MODEL=wanx-v1
```

> ğŸ’¡ `WANX_MODEL` å¯é€‰å€¼ï¼š`wanx-v1`ï¼ˆä¾¿å®œï¼‰æˆ– `wanx2.1-t2i-turbo`ï¼ˆè´¨é‡æ›´é«˜ï¼‰

**è·å–æ–¹å¼ï¼ˆQwen-VL å’Œ Wanx å…±ç”¨ï¼‰ï¼š**
1. è®¿é—® [é˜¿é‡Œäº‘ DashScope](https://dashscope.aliyun.com/)
2. å¼€é€š DashScope æœåŠ¡
3. åˆ›å»º API Keyï¼ˆä¸¤ä¸ªæœåŠ¡å¯å…±ç”¨åŒä¸€ä¸ª Keyï¼‰

#### é˜¿é‡Œäº‘ OSS

ç”¨äºï¼šå›¾ç‰‡äº‘å­˜å‚¨ï¼ˆå¯ç”¨åæ”¯æŒ AI å›¾åƒåˆ†æï¼Œæ— é…ç½®æ—¶ä½¿ç”¨æœ¬åœ°å­˜å‚¨ï¼‰

```env
OSS_REGION=oss-cn-hangzhou
OSS_ACCESS_KEY_ID=your_oss_access_key_id
OSS_ACCESS_KEY_SECRET=your_oss_access_key_secret
OSS_BUCKET=your_bucket_name
```

**è·å–æ–¹å¼ï¼š**
1. è®¿é—® [é˜¿é‡Œäº‘ OSS æ§åˆ¶å°](https://oss.console.aliyun.com/)
2. åˆ›å»º Bucketï¼ˆå»ºè®®é€‰æ‹©å…¬å…±è¯»æƒé™ï¼‰
3. åœ¨ RAM è®¿é—®æ§åˆ¶ä¸­åˆ›å»º AccessKey

#### Unsplash API

ç”¨äºï¼šç›®çš„åœ°å°é¢å›¾ï¼ˆæ— é…ç½®æ—¶ä½¿ç”¨é»˜è®¤å›¾ç‰‡ï¼‰

```env
UNSPLASH_ACCESS_KEY=your_unsplash_access_key_here
UNSPLASH_ENABLED=true
```

**è·å–æ–¹å¼ï¼š**
1. è®¿é—® [Unsplash Developers](https://unsplash.com/developers)
2. æ³¨å†Œå¼€å‘è€…è´¦å·
3. åˆ›å»ºåº”ç”¨è·å– Access Key

#### é«˜å¾·åœ°å›¾ API

ç”¨äºï¼šPOI æœç´¢ã€åœ°ç‚¹ä¿¡æ¯è·å–

```env
AMAP_API_KEY=your_amap_api_key_here
```

**è·å–æ–¹å¼ï¼š**
1. è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°](https://console.amap.com/dev/key/app)
2. æ³¨å†Œå¹¶åˆ›å»ºåº”ç”¨
3. è·å– Web æœåŠ¡ API Key

#### Tavily API

ç”¨äºï¼šè¡Œç¨‹èŠ‚ç‚¹ä¿¡æ¯éªŒè¯

```env
TAVILY_API_KEY=your_tavily_api_key_here
```

**è·å–æ–¹å¼ï¼š**
1. è®¿é—® [Tavily](https://tavily.com/)
2. æ³¨å†Œè´¦å·è·å– API Key

---

### å®Œæ•´é…ç½®ç¤ºä¾‹

```env
# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=development

# æ•°æ®åº“é…ç½®
DATABASE_PATH=./data/travel-planner.db

# æ–‡ä»¶å­˜å‚¨é…ç½®
STORAGE_PATH=./uploads

# ========== å¿…éœ€ ==========
# DeepSeek API
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxx
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat

# ========== å¯é€‰ ==========
# é˜¿é‡Œäº‘ OSS (æ¨èé…ç½®ï¼Œå¯ç”¨ AI å›¾åƒåˆ†æ)
OSS_REGION=oss-cn-hangzhou
OSS_ACCESS_KEY_ID=LTAI5txxxxxxxxxx
OSS_ACCESS_KEY_SECRET=xxxxxxxxxxxxxxxx
OSS_BUCKET=my-travel-bucket

# é€šä¹‰åƒé—®è§†è§‰ç‰ˆ (ç…§ç‰‡åˆ†æ)
QWEN_VL_API_KEY=sk-xxxxxxxxxxxxxxxx
QWEN_VL_BASE_URL=https://dashscope.aliyuncs.com/api/v1

# é€šä¹‰ä¸‡ç›¸ (AI é…å›¾)
WANX_API_KEY=sk-xxxxxxxxxxxxxxxx
WANX_BASE_URL=https://dashscope.aliyuncs.com/api/v1
WANX_MODEL=wanx-v1

# Unsplash (ç›®çš„åœ°å°é¢)
UNSPLASH_ACCESS_KEY=xxxxxxxxxxxxxxxx
UNSPLASH_ENABLED=true

# é«˜å¾·åœ°å›¾ (POI æœç´¢)
AMAP_API_KEY=xxxxxxxxxxxxxxxx

# Tavily (ä¿¡æ¯éªŒè¯)
TAVILY_API_KEY=tvly-xxxxxxxxxxxxxxxx
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-travel-planner/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ clients/           # å¤–éƒ¨ API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ deepseekClient.ts    # DeepSeek æ–‡æœ¬ç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ qwenVLClient.ts      # é€šä¹‰åƒé—®å›¾åƒç†è§£
â”‚   â”‚   â”‚   â”œâ”€â”€ wanxClient.ts        # é€šä¹‰ä¸‡ç›¸å›¾åƒç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ unsplashClient.ts    # Unsplash å›¾ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ amapClient.ts        # é«˜å¾·åœ°å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ tavilyClient.ts      # Tavily æœç´¢
â”‚   â”‚   â”‚   â””â”€â”€ ossClient.ts         # é˜¿é‡Œäº‘ OSS
â”‚   â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts             # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â”‚   â””â”€â”€ schema.sql           # è¡¨ç»“æ„å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ tripRoutes.ts        # æ—…ç¨‹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ destinationRoutes.ts # ç›®çš„åœ°æ¨è
â”‚   â”‚   â”‚   â”œâ”€â”€ itineraryRoutes.ts   # è¡Œç¨‹è§„åˆ’
â”‚   â”‚   â”‚   â”œâ”€â”€ diaryRoutes.ts       # æ—¥è®°ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ memoirRoutes.ts      # å›å¿†å½•ç”Ÿæˆ
â”‚   â”‚   â”‚   â””â”€â”€ visionRoutes.ts      # å›¾åƒåˆ†æ
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ storage/           # æ–‡ä»¶å­˜å‚¨
â”‚   â”œâ”€â”€ data/                  # SQLite æ•°æ®åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ uploads/               # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ photos/           # ç…§ç‰‡
â”‚   â”‚   â””â”€â”€ audio/            # è¯­éŸ³å½•éŸ³
â”‚   â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                  # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/              # API è°ƒç”¨å°è£…
â”‚   â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Button/             # æŒ‰é’®
â”‚   â”‚   â”‚   â”œâ”€â”€ Card/               # å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatPanel/          # å¯¹è¯é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ CitySearch/         # åŸå¸‚æœç´¢
â”‚   â”‚   â”‚   â”œâ”€â”€ DestinationCard/    # ç›®çš„åœ°å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ DiaryFragment/      # æ—¥è®°ç‰‡æ®µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ItineraryBoard/     # è¡Œç¨‹çœ‹æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoirViewer/       # å›å¿†å½•æŸ¥çœ‹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ NodeRecorder/       # èŠ‚ç‚¹è®°å½•å™¨
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.tsx        # é¦–é¡µ - æ„¿æ™¯è¾“å…¥
â”‚   â”‚   â”‚   â”œâ”€â”€ DestinationPage.tsx # ç›®çš„åœ°é€‰æ‹©
â”‚   â”‚   â”‚   â”œâ”€â”€ PlanningPage.tsx    # è¡Œç¨‹è§„åˆ’
â”‚   â”‚   â”‚   â”œâ”€â”€ TravelingPage.tsx   # æ—…è¡Œè®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoirPage.tsx      # å›å¿†å½•æŸ¥çœ‹
â”‚   â”‚   â”‚   â””â”€â”€ HistoryPage.tsx     # è¿¹å½•ä¹¦æ¶
â”‚   â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ App.tsx           # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ package.json
â””â”€â”€ package.json              # æ ¹é…ç½® (workspaces)
```

---

## ğŸ“œ å¯ç”¨è„šæœ¬

```bash
# å¼€å‘
npm run dev              # åŒæ—¶å¯åŠ¨å‰åç«¯
npm run dev:backend      # ä»…å¯åŠ¨åç«¯ (ç«¯å£ 3000)
npm run dev:frontend     # ä»…å¯åŠ¨å‰ç«¯ (ç«¯å£ 5173)

# æ„å»º
npm run build:backend    # æ„å»ºåç«¯
npm run build:frontend   # æ„å»ºå‰ç«¯

# æµ‹è¯•
npm run test:backend     # è¿è¡Œåç«¯æµ‹è¯•
npm run test:frontend    # è¿è¡Œå‰ç«¯æµ‹è¯•

# ä»£ç è´¨é‡
npm run lint             # ESLint æ£€æŸ¥
npm run format           # Prettier æ ¼å¼åŒ–
```

---

## ğŸ® ä½¿ç”¨æµç¨‹

### 1. è¾“å…¥æ„¿æ™¯
åœ¨é¦–é¡µè¾“å…¥ä½ çš„æ—…è¡Œæ„¿æœ›ï¼Œå¦‚"æƒ³å»ä¸€ä¸ªæœ‰æµ·çš„åœ°æ–¹æ”¾æ¾ä¸€å‘¨"

### 2. é€‰æ‹©ç›®çš„åœ°
ç³»ç»Ÿæ¨è 3 ä¸ªç›®çš„åœ°ï¼Œå¯ä»¥"æ¢ä¸€æ‰¹"æˆ–ç›´æ¥é€‰æ‹©å¿ƒä»ªçš„åŸå¸‚

### 3. è§„åˆ’è¡Œç¨‹
é€šè¿‡å¯¹è¯è°ƒæ•´ AI ç”Ÿæˆçš„è¡Œç¨‹ï¼Œæ”¯æŒï¼š
- æ‹–æ‹½æ’åºè°ƒæ•´é¡ºåº
- æ‰‹åŠ¨ç¼–è¾‘èŠ‚ç‚¹å†…å®¹
- å¯¹è¯å¼ä¿®æ”¹ï¼ˆå¦‚"æŠŠç¬¬äºŒå¤©çš„è¡Œç¨‹æ”¹è½»æ¾ä¸€ç‚¹"ï¼‰

### 4. å¼€å§‹æ—…è¡Œ
è¿›å…¥æ—…è¡Œæ¨¡å¼ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ï¼š
- ğŸ“· ä¸Šä¼ ç…§ç‰‡
- ğŸ¤ å½•åˆ¶è¯­éŸ³
- âœï¸ è¾“å…¥æ–‡å­—
- ç‚¹å‡»"ç‚¹äº®"ç”Ÿæˆ AI æ—¥è®°

### 5. ç”Ÿæˆå›å¿†å½•
æ—…è¡Œç»“æŸåï¼š
- è‡ªåŠ¨ç”Ÿæˆç²¾ç¾å›å¿†å½•
- åŒ…å«æ—…è¡Œäººæ ¼åˆ†æ
- å¯é€‰æ‹©ä¸åŒæ¨¡æ¿é£æ ¼
- æ”¯æŒåˆ†äº«å’Œä¸‹è½½

### 6. è¿¹å½•ä¹¦æ¶
æ‰€æœ‰æ—…è¡Œè®°å½•ä»¥æ—¥å¼ä¹¦ç±é£æ ¼å±•ç¤ºï¼Œæ”¯æŒï¼š
- ç­›é€‰æŸ¥çœ‹ï¼ˆå…¨éƒ¨/æ’°å†™ä¸­/å·²çè—ï¼‰
- æ‰¹é‡ç®¡ç†
- ç»§ç»­ç¼–è¾‘æœªå®Œæˆçš„æ—…è¡Œ

---

## ğŸ“„ License

MIT
